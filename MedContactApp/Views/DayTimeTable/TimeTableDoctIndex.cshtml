@using MedContactApp.FilterSortHelpers;
@addTagHelper *, MedContactApp.FilterSortPageHelpers
@using MedContactApp.Helpers;
@addTagHelper *, MedContactApp


@model TimeTableDoctIndexModel

@{
    ViewData["Title"] = "Doctor Speciality TimeTable";
  
}
<h4>@Model.DoctorInfo.Name @Model.DoctorInfo.Surname</h4>
<h6>Speciality @Model.DoctorInfo.Speciality</h6>
@if ((int?)ViewData["Flag"] >= 1)
{
    <h6>User Id: @Model.DoctorInfo.UserId</h6>
    <p>
        <a href="~/daytimetable/create/?dataid=@Model.DoctorInfo.DoctorDataId">Create New DayTimeTable</a>
    </p>
}
<hr />


@if (Model.TableList!= null && Model.TableList.Any() && Model.DoctorInfo.DoctorDataId!=null)
{
    <Table class="delivery">  
        <caption>TimeTable</caption>
        <thead>
            <tr>
                <th>
                    <sort-header action="TimeTableDoctIndex" up="@Model.SortViewModel.Up"
                     opt-url-dataid="@(Model.DoctorInfo.DoctorDataId)"
                     opt-url-reflink=@Model.Reflink
                     current="@Model.SortViewModel.Current" property="@Model.SortViewModel.DateSort">Date</sort-header>
                </th>
                <th>
                    Start WorkTime
                </th>
                <th>
                    Finish WorkTime
                </th>
                <th>
                    Consult Duration
                </th>
                <th>
                    Total Ticket Quantity
                </th>
                <th>
                    Free Ticket Quantity
                </th>
                <th>
                    Creation Date
                </th>
                <th>
                    Details
                </th>
            </tr>
            <thead>
                <tbody>
                    @foreach (var item in Model.TableList)
                    {
                    await Html.RenderPartialAsync("TableListPartialView", item, ViewData);
                    }

                </tbody>
    </Table>
}
else
{
    <h6>Doctor has no actual timetables</h6>
}


@section Footer
{
    <div>
        @if (!string.IsNullOrEmpty(Model.Reflink))
        {
           if ((int?)ViewData["Flag"] == 11)
           {
             <a href="~/AdminPanelDoctor/DoctorDataIndex"><h6>&#5130 Back to doctor data index</h6></a>
   
           }
           else if ((int?)ViewData["Flag"] >=12)
           {
                <a href="~/DayTimeTable/SelelctSpec"><h6>&#5130 Back to speciality index</h6></a>
   
           }
           else
               @Html.Raw(@$"<a href=""{@Model.Reflink}""><h6>&#5130 Back</h6></a>");
           }
        else
        {
            <a asp-controller="Home" asp-action="Index"><h6>&#5130 Back to home page</h6></a>
        }
    </div>

    @Html.GeneratePaginator( @Model.PageViewModel.TotalPages,@Model.PageViewModel.PageNumber,
                             @Model.PageViewModel.PageRoute, @Model.ProcessOptions)
 }


@section CssStyles
{
    <style>
       caption {
          caption-side: top;
          text-align: center;
          padding: 10px 0;
          font-size: 14px;}        
    </style>
}
